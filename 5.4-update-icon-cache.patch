--- origsrc/mail-notification-5.4/jbsrc/jb.c	2008-05-22 10:47:04.000000000 -0500
+++ src/mail-notification-5.4/jbsrc/jb.c	2008-05-23 14:08:33.906250000 -0500
@@ -156,6 +161,7 @@
   jb_variable_add_bool("debug", NULL, NULL, 0, FALSE);
   jb_variable_add_bool("regression-tests", NULL, NULL, 0, FALSE);
   jb_variable_add_bool("gconf-sanity-check", NULL, NULL, JB_VARIABLE_C_DEFINE, TRUE);
+  jb_variable_add_bool("update-icon-cache", NULL, NULL, 0, TRUE);
 }
 
 void
@@ -364,10 +370,13 @@
   if (jb_variable_get_bool("hotmail"))
     jb_group_add_data_file(group, "hotmail.png", "$pkgdatadir");
 
-  rule = jb_rule_new();
-  jb_rule_set_install_message(rule, "updating the GTK+ icon cache");
-  jb_rule_add_install_command(rule, "-gtk-update-icon-cache -f -t $datadir/icons/hicolor");
-  jb_group_add_resource(group, JB_GROUP_RESOURCE(rule));
+  if (jb_variable_get_bool("update-icon-cache"))
+    {
+      rule = jb_rule_new();
+      jb_rule_set_install_message(rule, "updating the GTK+ icon cache");
+      jb_rule_add_install_command(rule, "-gtk-update-icon-cache -f -t $datadir/icons/hicolor");
+      jb_group_add_resource(group, JB_GROUP_RESOURCE(rule));
+    }
 
   jb_group_add(group);
 
